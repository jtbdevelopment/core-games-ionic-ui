!function(o){o.module("coreGamesIonicUi.config",[]).value("coreGamesIonicUi.config",{debug:!0}),o.module("coreGamesIonicUi.controllers",[]),o.module("coreGamesIonicUi.services",[]),o.module("coreGamesIonicUi",["ionic","ngCordova","coreGamesUi","coreGamesIonicUi.config","coreGamesIonicUi.services","coreGamesIonicUi.controllers"])}(angular),angular.module("coreGamesIonicUi.controllers").controller("CoreIonicNetworkCtrl",["$scope","$state","$cordovaNetwork","$timeout","$window","ENV",function(o,n,e,i,c,a){function t(){n.go("signin")}function r(){o.message="Checking network status...",0===c.location.href.indexOf("file")&&"localhost"!==a.domain?i(function(){try{if(e.isOnline())return t(),void 0}catch(n){if("navigator.connection is undefined"===n.message)return t(),void 0;console.log(n)}o.message="Internet not currently available."},1e3):t()}o.$on("$cordovaNetwork:online",function(){t()}),o.$on("$ionicView.enter",function(){r()}),r()}]),angular.module("coreGamesIonicUi.controllers").controller("CoreIonicSignedInCtrl",["$scope","$state","$rootScope","$cacheFactory",function(o,n,e,i){function c(){i.get("$http").removeAll()}function a(){console.log("Logged in"),c(),e.$broadcast("login"),n.go("app.games")}o.$on("$ionicView.enter",function(){a()})}]),angular.module("coreGamesIonicUi.controllers").controller("CoreIonicSignInCtrl",["$scope","$window","$http","$state","$cacheFactory","jtbFacebook","ENV","$ionicLoading",function(o,n,e,i,c,a,t,r){function s(){c.get("$http").removeAll()}function l(){r.hide(),i.go("signedin")}function u(){r.hide(),console.log("Login failed"),s(),o.message="Invalid username or password."}function m(){o.showFacebook=!0,o.showManual="localhost"===t.domain||t.domain.href.indexOf("-dev")>-1,o.message=""}function d(){o.showFacebook=!1,o.showManual=!1,o.message="Logging in via Facebook",s(),0===n.location.href.indexOf("file")?e.get(t.apiEndpoint+"/auth/facebook?code="+a.currentAuthorization().accessToken).success(l).error(u):n.location=t.apiEndpoint+"/auth/facebook"}o.message="Initializing...",o.showFacebook=!1,o.showManual=!1,o.manualForm={username:"",password:"",rememberme:!1},o.manualLogin=function(){r.show({template:"Sending..."}),s(),e({transformRequest:function(o){var n=[];for(var e in o)o.hasOwnProperty(e)&&n.push(encodeURIComponent(e)+"="+encodeURIComponent(o[e]));return n.join("&")},url:"/signin/authenticate",data:{username:o.manualForm.username,password:o.manualForm.password,"remember-me":o.manualForm.rememberme},headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST"}).success(l).error(u)},o.fbLogin=function(){a.initiateFBLogin().then(function(o){o.auto?d():m()},function(){m()})},o.$on("$ionicView.enter",function(){a.canAutoSignIn().then(function(o){s(),o.auto?d():m()},function(){m()})})}]);