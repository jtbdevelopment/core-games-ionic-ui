!function(o){o.module("coreGamesIonicUi.config",[]).value("coreGamesIonicUi.config",{debug:!0}),o.module("coreGamesIonicUi.controllers",[]),o.module("coreGamesIonicUi.services",[]),o.module("coreGamesIonicUi",["ionic","ngCordova","coreGamesUi","coreGamesIonicUi.config","coreGamesIonicUi.services"])}(angular),angular.module("coreGamesIonicUi.controllers").controller("CoreIonicNetworkCtrl",["$scope","$state","$cordovaNetwork","$timeout","$window","ENV",function(o,n,e,i,a,c){function t(){n.go("signin")}function r(){o.message="Checking network status...",0===a.location.href.indexOf("file")&&"localhost"!==c.domain?i(function(){try{if(e.isOnline())return t(),void 0}catch(n){if("navigator.connection is undefined"===n.message)return t(),void 0;console.log(n)}o.message="Internet not currently available."},1e3):t()}o.$on("$cordovaNetwork:online",function(){t()}),o.$on("$ionicView.enter",function(){r()}),r()}]),angular.module("coreGamesIonicUi.controllers").controller("CoreIonicSignedInCtrl",["$scope","$state","$rootScope","$cacheFactory",function(o,n,e,i){function a(){i.get("$http").removeAll()}function c(){console.log("Logged in"),a(),e.$broadcast("login"),n.go("app.games")}o.$on("$ionicView.enter",function(){c()})}]),angular.module("coreGamesIonicUi.controllers").controller("CoreIonicSignInCtrl",["$scope","$window","$http","$state","$cacheFactory","jtbFacebook","ENV","$ionicLoading",function(o,n,e,i,a,c,t,r){function s(){a.get("$http").removeAll()}function u(){r.hide(),i.go("signedin")}function l(){r.hide(),console.log("Login failed"),s(),o.message="Invalid username or password."}function m(){o.showFacebook=!0,o.showManual="localhost"===t.domain||t.domain.href.indexOf("-dev")>-1,o.message=""}function d(){o.showFacebook=!1,o.showManual=!1,o.message="Logging in via Facebook",s(),0===n.location.href.indexOf("file")?e.get(t.apiEndpoint+"/auth/facebook?code="+c.currentAuthorization().accessToken).success(u).error(l):n.location=t.apiEndpoint+"/auth/facebook"}o.message="Initializing...",o.showFacebook=!1,o.showManual=!1,o.manualForm={username:"",password:"",rememberme:!1},o.manualLogin=function(){r.show({template:"Sending..."}),s(),e({transformRequest:function(o){var n=[];for(var e in o)o.hasOwnProperty(e)&&n.push(encodeURIComponent(e)+"="+encodeURIComponent(o[e]));return n.join("&")},url:"/signin/authenticate",data:{username:o.manualForm.username,password:o.manualForm.password,"remember-me":o.manualForm.rememberme},headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST"}).success(u).error(l)},o.fbLogin=function(){c.initiateFBLogin().then(function(o){o.auto?d():m()},function(){m()})},o.$on("$ionicView.enter",function(){c.canAutoSignIn().then(function(o){s(),o.auto?d():m()},function(){m()})})}]);